<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p id="task1" class="task">
      Мне надо пересмотреть полностью снова весь курс по верстке...
    </p>

    <script>
      const user = {
        name: "John Smith",
        age: 30,
        email: "john@example.com",
      };
      const user1 = {
        name: "Anna Smith",
        age: 20,
        email: "anna@example.com",
      };

      async function getUserData(ID) {
        await fetch("https://jsonplaceholder.typicode.com/users")
          .then((response) => response.json())
          .then((data) => console.log(data.filter((user) => user.id === ID)))
          .catch((error) => console.log(error.message));
      }
      getUserData(1);

      async function saveUserData(user) {
        //   .then(() => {
        //     console.log("Успешно!");
        //   })
        //   .catch((error) => {
        //     console.error("чет не так");
        //   });
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "https://httpbin.org/post");
        xhr.send(JSON.stringify(user, null, 4));
        xhr.onload = function () {
          if (xhr.status != 200) {
            console.log(`Error ${xhr.status}: ${xhr.statusText}`);
          } else {
            console.log(`user: ${xhr.response}`);
          }
        };
        xhr.onerror = function () {
          console.log("Request error");
        };
        //     const url = "https://jsonplaceholder.typicode.com/users";
        //     const json = await fetch(url)
        //       .then((response) => response.json()) // .text(), etc.
        //       .catch((e) => {});
      }

      saveUserData(user)
        .then(() => {
          console.log("User data saved successfully");
        })
        .catch((error) => {
          console.log(error.message);
        });

      saveUserData(user1)
        .then(() => {
          console.log("User data saved successfully");
        })
        .catch((error) => {
          console.log(error.message);
        });

      //   const url = "https://jsonplaceholder.typicode.com/users";
      //   fetch(url, {
      //     method: "POST",
      //     //   body: new FormData(document.getElementById("inputform")),
      //     // -- or --
      //     body: JSON.stringify({
      //       user: document.getElementById("ID").value,
      //     }),
      //   })
      //     .then(
      //       (response) => response.json() // .text(), etc.
      //       // same as function(response) {return response.text();}
      //     )
      //     .then((html) => console.log(html));

      function changeStyleDelayed(element, time) {
        setTimeout(function () {
          document.querySelector(element).style.color = "green";
        }, time);
      }
      changeStyleDelayed(".task", 2000);
    </script>
  </body>
</html>
