<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- тушка -->
    <script>
      //   getPrototypeChain([1, 2, 3, 4]);

      //   //   obj.__proto__; //обращаемся по свойству
      //   //   Object.getPrototypeOf(obj); // вызываем заранее определенную функцию(метод), которая возвращает прототип передаваемого объекта. советуют юзать этот

      //   //   const obj = new Object();
      //   //   Object.prototype; //prototype - свойство функции, в котором объект, который будет прототипом для всех объектов от этой функции конструктора Object
      //   //   //Array.prototype - свойство для массива

      //   function getPrototypeChain(obj) {
      //     const result = [obj];
      //     let proto = Object.getPrototypeOf(obj);
      //     while (proto) {
      //       //или !null
      //       result.push(proto);
      //       proto = Object0.getPrototypeOf(proto);
      //     }
      //     return result;
      //   }

      //   console.log(getPrototypeChain([1, 2, 3, 4]));

      //   function Persone(name, age) {
      //     this.name = name;
      //     this.age = age;
      //   }

      //   Persone.prototype.introduce = function () {
      //     console.log(`my name is ${this.name}, my age is ${this.age}.`);
      //   };

      //   const person1 = new Persone("john", 25);
      //   person1.introduce();

      class BankAccount {
        static bankName = "GBank";

        constructor(accountNumber, balance) {
          this.accountNumber = accountNumber;
          this.balance = balance;
        }

        deposit(amount) {
          if (amount <= 0 || !Number.isFinite(amount)) {
            throw new Error(`Wrong deposit amount, must be a positive number`);
          }
          const splittedNumber = amount.toString().split(".");
          if (splittedNumber[1] && splittedNumber[1].length > 2) {
            throw new Error("Слишком маленькая сумма иди в кассу!");
          }
          this.balance += amount;
        }

        withdraw(amount) {
          if (amount <= 0 || !Number.isFinite(amount)) {
            //amount === Infinity
            throw new Error(`Wrong deposit amount, must be a positive number`);
          }
          const splittedNumber = amount.toString().split("."); //лучше всего превратить в строку и посчитать, сколько символов после точки
          if (splittedNumber[1] && splittedNumber[1].length > 2) {
            throw new Error("Слишком маленькая сумма иди в кассу!");
          }
          if (this.balance < amount) {
            throw new Error(
              `Insufficient funds in account "${this.accountNumber}"`
            );
          }
          this.balance -= amount;
        }

        printBalance() {
          console.log(
            `${BankAccount.bankName} account "${this.accountNumber}" balance: ${this.balance}`
          );
        }
      }

      const account1 = new BankAccount("1234567890", 1000);
      console.log(account1);
      console.dir(BankAccount);
      account1.deposit(500);
      console.log(account1);
      account1.withdraw(200);
      console.log(account1);
      // account1.withdraw(1500); // Insufficient funds in account "1234567890"
      // console.log(account1);
      // account1.withdraw(-200);
      // console.log(account1);// Wrong deposit amount, must be a positive number.
      // try {
      //   account1.deposit(-500);
      //   console.log(account1);
      // } catch (error) {
      //   alert(`Возникла ошибка ${error.message}`);
      // }
      // account1.deposit(-500); // Wrong deposit amount, must be a positive number.
      // console.log(account1);
      // account1.deposit(Infinity);
      // console.log(account1);// Wrong deposit amount, must be a positive number.
      account1.printBalance(); // GBank account "1234567890" balance: 1300
      account1.deposit(200.234);
      console.log(account1);

      // //animal

      // class Animal {
      //   constructor(name) {
      //     this.name = name;
      //   }
      //   speak() {
      //     console.log(`${this.name} издает звук`);
      //   }
      // }

      // class Dog extends Animal {
      //   constructor(name, breed) {
      //     super(name);
      //     this.breed = breed;
      //   }
      //   fetch() {
      //     console.log(`${this.name} принес мяч`);
      //   }
      // }

      // function printName(a, b) {
      //   console.log(this.name, a, b);
      // }

      // const animal1 = new Animal("Животное");
      // animal1.speak(); // "Животное издает звук."
      // const dog1 = new Dog("Бобик", "Дворняжка");
      // dog1.speak(); // "Бобик издает звук."
      // console.log(dog1.breed); // "Дворняжка"
      // dog1.fetch(); // "Бобик принес мяч."
      // console.log(dog1);
      // printName.call(animal1);
      // printName.call(dog1, 5, 10);
      // printName.apply(dog1, [5, 10]);
    </script>
  </body>
</html>
